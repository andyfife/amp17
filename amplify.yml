version: 1
frontend:
  phases:
    preBuild:
      commands:
        - npm ci --legacy-peer-deps # Fixes React/Amplify dep conflict
    build:
      commands:
        - npm run build # Your Next.js build script
  artifacts:
    baseDirectory: .next # SSR output dir
    files:
      - '**/*'
  cache:
    paths:
      - node_modules/**/* # Cache deps for faster builds
      - .next/cache/**/* # Next.js cache
